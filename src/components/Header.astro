---
type VideoCfg = {
  kind: "video";
  src: string;
  type?: string;
  poster?: string;
  alt?: string;
};
type ImageCfg = { kind: "image"; src: string; alt?: string };
type MediaCfg = VideoCfg | ImageCfg;

type VariantCfg = {
  media: MediaCfg;
  title: string;
  subtitle?: string;
  buttonText?: string;
};

const VARIANTS: Record<number, VariantCfg> = {
  1: {
    media: {
      kind: "video",
      src: "/videos/heroVideo.MP4",
      type: "video/mp4",
      poster: "/images/heroPoster.jpg",
      alt: "Leśny krajobraz o świcie",
    },
    title: "Znajdź siebie W Harmonii Lasu",
    subtitle: "Miejsce odpoczynku i rozwoju w sercu natury",
  },

  2: {
    media: {
      kind: "image",
      src: "/images/hero-2.jpg",
      alt: "Ścieżka w lesie",
    },
    title: "Warsztaty kynologiczne, \nktóre łączą - nie tylko smyczą",
  },
  3: {
    media: {
      kind: "image",
      src: "/images/hero-3.jpg",
      alt: "Strumień wśród drzew",
    },
    title: "Rezerwacje Pobytów",
  },
  4: {
    media: {
      kind: "image",
      src: "/images/hero-4.jpg",
      alt: "Polana o zachodzie słońca",
    },
    title: "Strefa Wiedzy",
  },
  5: {
    media: {
      kind: "image",
      src: "/images/hero-5.jpg",
      alt: "Mglisty poranek",
    },
    title: "Przestrzeń Warsztatowa",
  },
  6: {
    media: {
      kind: "image",
      src: "/images/hero-6.jpg",
      alt: "Spokojne jezioro",
    },
    title: "Oferta dla Grup",
  },
  7: {
    media: {
      kind: "image",
      src: "/images/hero-7.jpg",
      alt: "Górska panorama",
    },
    title: "O nas",
  },
};

const { variant = 1, title, subtitle, imageSrc, videoSrc } = Astro.props;

const cfg = VARIANTS[variant] ?? VARIANTS[1];
const isVideo = cfg.media.kind === "video";

const H1 = title ?? cfg.title;
const H2 = subtitle ?? cfg.subtitle ?? "";

const videoFinalSrc =
  videoSrc ?? (isVideo ? (cfg.media as any).src : undefined);
const imageFinalSrc =
  imageSrc ?? (!isVideo ? (cfg.media as any).src : undefined);
const imgAlt = (cfg.media as any).alt ?? "Background";
const videoType = (cfg.media as any).type ?? "video/mp4";
const videoPoster = (cfg.media as any).poster;
---

<header class='relative h-screen overflow-hidden'>
  {
    isVideo ? (
      <video
        autoplay
        muted
        loop
        playsinline
        class='absolute inset-0 w-full h-full object-cover'
        poster={videoPoster}
      >
        <source src={videoFinalSrc} type={videoType} />
      </video>
    ) : (
      <img
        src={imageFinalSrc}
        alt={imgAlt}
        class='absolute inset-0 w-full h-full object-cover'
      />
    )
  }

  <!-- Overlay -->
  <div class='absolute inset-0 bg-brand-grey-400/60'></div>

  <div
    class='relative z-10 flex h-full flex-col justify-end items-center text-center pb-20'
  >
    <h1
      class={`font-brand-serif italic text-3xl md:text-5xl text-brand-white-100 ${variant === 1 ? "mb-5" : "mb-16"} whitespace-pre-line`}
    >
      {H1}
    </h1>
    {
      H2 && (
        <h2 class='font-brand-sans font-extralight text-lg md:text-2xl text-brand-white-100 mb-8 whitespace-pre-line'>
          {H2}
        </h2>
      )
    }
    <p
      class='font-brand-sans font-semibold text-brand-white-100 text-[13px] mb-3 whitespace-pre-line'
    >
      Odkryj więcej
    </p>
    <a
      class='inline-flex hover:animate-pulse hover:scale-110 duration-300'
      href='#welcome'
    >
      <img src='/icons/hero-arrow.svg' alt='Scroll down' />
    </a>
  </div>
</header>
